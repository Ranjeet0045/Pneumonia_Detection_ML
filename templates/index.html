<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MediScan AI | Multi-Class Diagnostics</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg-color:#F8F9FB;
  --card-bg:#FFFFFF;
  --text-main:#1A202C;
  --text-muted:#718096;
  --primary:#3182CE;
  --border:#E2E8F0;

  --danger:#E53E3E;
  --warning:#DD6B20;
  --success:#38A169;
  --neutral:#718096;

  --shadow:0 10px 22px rgba(0,0,0,.08);
}

body{
  margin:0;
  font-family:'Inter',sans-serif;
  background-color:var(--bg-color);
  min-height:100vh;
  color:var(--text-main);
}

/* GRID */
.main-container{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:50px;
  max-width:1250px;
  margin:0 auto;
  padding:40px;
  animation:fadeIn .75s ease forwards;
}

@media(max-width:900px){
  .main-container{grid-template-columns:1fr;}
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(25px);}
  to{opacity:1; transform:translateY(0);}
}

/* CARD */
.white-card{
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:22px;
  padding:40px;
  text-align:center;
  box-shadow:var(--shadow);
  position:relative;
  animation:float 6s ease-in-out infinite;
}

@keyframes float{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-6px);}
}

/* TEXT */
.badge{
  background:#EBF8FF;
  color:var(--primary);
  padding:7px 14px;
  border-radius:20px;
  font-size:.7rem;
  font-weight:700;
  letter-spacing:1px;
}

.back-link{
  text-decoration:none;
  font-size:.85rem;
  color:var(--text-muted);
  transition:.2s;
}
.back-link:hover{color:var(--primary);}

h2{
  margin-top:10px;
}

.info-title{
  font-size:2.2rem;
  margin-bottom:18px;
}

.info-text{
  line-height:1.7;
  background:#F7FAFC;
  padding:18px 20px;
  border-radius:14px;
  margin-bottom:25px;
  border-left:5px solid var(--primary);
}

/* UPLOAD */
.upload-area{
  border:2px dashed #CBD5E0;
  border-radius:18px;
  padding:45px 20px;
  margin-top:28px;
  cursor:pointer;
  background:#F7FAFC;
  transition:.25s;
}

.upload-area:hover{
  background:#EDF2F7;
  border-color:var(--primary);
  transform:scale(1.02);
}

.upload-icon{
  font-size:3rem;
  margin-bottom:10px;
  opacity:.6;
}

input[type="file"]{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  opacity:0;
  cursor:pointer;
}

/* LOADER */
.loader{
  display:none;
  width:45px;
  height:45px;
  border:4px solid #EDF2F7;
  border-top:4px solid var(--primary);
  border-radius:50%;
  margin:25px auto;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  from{transform:rotate(0deg);}
  to{transform:rotate(360deg);}
}

/* RESULTS */
.preview-img{
  width:175px;
  height:175px;
  border-radius:18px;
  object-fit:cover;
  border:1px solid var(--border);
  box-shadow:0 4px 12px rgba(0,0,0,.1);
  margin:25px auto;
}

.status{
  font-size:2em;
  font-weight:800;
  margin:15px 0;
  animation:pulse 1.3s infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.06);}
}

.BACTERIAL{color:var(--danger);}
.VIRAL{color:var(--warning);}
.NORMAL{color:var(--success);}
.UNCERTAIN{color:var(--neutral);}

/* BUTTON */
.restart-btn{
  display:inline-block;
  margin-top:20px;
  padding:12px 38px;
  background:linear-gradient(135deg,#3182CE,#63B3ED);
  color:white;
  border-radius:12px;
  text-decoration:none;
  font-weight:600;
  box-shadow:0 8px 16px rgba(49,130,206,.25);
  transition:.25s;
}

.restart-btn:hover{
  transform:translateY(-3px) scale(1.05);
  box-shadow:0 12px 22px rgba(49,130,206,.35);
}

/* TIP LIST */
.tip-item{
  display:flex;
  align-items:center;
  margin-bottom:14px;
  padding:15px;
  background:white;
  border:1px solid var(--border);
  border-radius:12px;
  gap:15px;
  transition:.25s;
}

.tip-item:hover{
  transform:translateX(6px);
  box-shadow:0 4px 14px rgba(0,0,0,.05);
}

.tip-icon{
  font-size:1.6rem;
}

</style>
</head>
<body>

<div class="main-container">

<div class="white-card">

<div style="display:flex;justify-content:space-between;align-items:center;">
  <span class="badge">MediScan AI</span>
  <a href="/" class="back-link">‚Üê Info Page</a>
</div>

<h2>Chest X-Ray Analysis</h2>

{% if not prediction %}
<p style="color:var(--text-muted);font-size:.85rem;">
Upload an X-ray to detect Bacterial, Viral or Normal conditions.
</p>

<form id="uploadForm" method="post" enctype="multipart/form-data">
  <div class="upload-area" id="dropZone">
    <span class="upload-icon">üì§</span>
    <p>
      <strong>Click to Upload</strong><br>
      <span style="font-size:.8em;color:var(--text-muted);">
        or Drag & Drop File
      </span>
    </p>
    <input type="file" name="file" accept="image/*" onchange="showLoader()">
  </div>
</form>

<div class="loader" id="loader"></div>

{% else %}
<img src="{{ img_path }}" class="preview-img">

<p style="margin:0;letter-spacing:1px;text-transform:uppercase;
font-size:.75rem;color:var(--text-muted);">Diagnosis Result</p>

<div class="status {{ prediction }}">
{% if prediction == 'BACTERIAL' %}
BACTERIAL PNEUMONIA
{% elif prediction == 'VIRAL' %}
VIRAL PNEUMONIA
{% elif prediction == 'UNCERTAIN' %}
INCONCLUSIVE
{% else %}
NORMAL (HEALTHY)
{% endif %}
</div>

<a href="/detect" class="restart-btn">
Analyze New Scan
</a>
{% endif %}
</div>

<div class="info-section">

{% if not prediction %}
<h1 class="info-title">Advanced Diagnosis</h1>

<div class="info-text">
Not all pneumonia is the same.
Identifying if it is <strong>Viral</strong>
or <strong>Bacterial</strong> ensures correct treatment.
</div>

<h3>How it works?</h3>

<div class="health-tips">
  <div class="tip-item">
    <span class="tip-icon">ü¶†</span>
    <div>
      <strong>Bacterial:</strong>
      Dense ‚Äúlobar‚Äù consolidation in lung sections.
    </div>
  </div>

  <div class="tip-item">
    <span class="tip-icon">üß¨</span>
    <div>
      <strong>Viral:</strong>
      Diffuse ‚Äúinterstitial‚Äù streaky lung patterns.
    </div>
  </div>
</div>

{% elif prediction == 'BACTERIAL' %}
<h1 class="info-title" style="color:var(--danger)">
‚ö†Ô∏è Bacterial Detected
</h1>

<div class="info-text" style="border-color:var(--danger);background:#FFF5F5;">
<div class="tip-item">üíä <strong>Start antibiotics</strong> exactly as prescribed by a doctor.</div>
<div class="tip-item">üå°Ô∏è <strong>Monitor fever & breathing</strong> symptoms daily.</div>
<div class="tip-item">üíß <strong>Stay hydrated</strong> to help loosen lung mucus.</div>
<div class="tip-item">üõèÔ∏è <strong>Get full rest</strong> to support immune recovery.</div>
<div class="tip-item">üè• <strong>Seek emergency care</strong> if breathing worsens or lips turn blue.</div>

{% elif prediction == 'VIRAL' %}
<h1 class="info-title" style="color:var(--warning)">
‚ö†Ô∏è Viral Detected
</h1>

<div class="info-text" style="border-color:var(--warning);background:#FFFAF0;">
<div class="tip-item">üõèÔ∏è <strong>Get full rest</strong> to help the immune system fight the infection.</div>
<div class="tip-item">üíß <strong>Drink plenty of fluids</strong> to prevent dehydration.</div>
<div class="tip-item">üö´ <strong>Avoid antibiotics</strong> unless prescribed for another condition.</div>
<div class="tip-item">üíä <strong>Use symptom relief</strong> medication for fever or pain.</div>
<div class="tip-item">üò∑ <strong>Stay isolated</strong> to prevent spreading the virus to others.</div>

{% elif prediction == 'UNCERTAIN' %}
<h1 class="info-title" style="color:var(--neutral)">
‚ö†Ô∏è Result Inconclusive
</h1>

<div class="info-text" style="border-color:var(--neutral);">
Image clarity insufficient.
Retake scan or consult specialist.
</div>

{% else %}
<h1 class="info-title" style="color:var(--success)">
‚úÖ Lungs Clear
</h1>

<div class="info-text" style="border-color:var(--success);background:#F0FFF4;">
<div class="tip-item">üßº <strong>Maintain hygiene</strong> ‚Äì hand-washing reduces infection risk.</div>
<div class="tip-item">üö≠ <strong>Avoid smoke exposure</strong> ‚Äì protects lung tissue.</div>
<div class="tip-item">üèÉ <strong>Regular exercise</strong> ‚Äì improves breathing capacity.</div>
</div>

{% endif %}

</div>
</div>

<script>
function showLoader(){
 document.getElementById("dropZone").style.display="none";
 document.getElementById("loader").style.display="block";
 document.getElementById("uploadForm").submit();
}
</script>

</body>
</html>
